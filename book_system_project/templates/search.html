{% extends "base.html" %}
    {% block topic %}Search{% endblock %}
    {% block subhead %}
        Search for book here:
    {% endblock %}

    {% block content %}
    <form method="POST">
        {{ form.csrf_token }}
        {{ form.title.label }} {{ form.title }}<br><br>
        {{ form.author.label }} {{ form.author }}<br><br>
        {{ form.genre.label }} {{ form.genre }}<br><br>
        {{ form.rating_min.label }} {{ form.rating_min }}<br><br>
        {{ form.rating_max.label }} {{ form.rating_max }}<br><br>
        {{ form.review.label }} {{ form.review }}<br><br>
        {{ form.submit }}
    </form>

    {% if results %}
    <br>Here are your search results:
    <ol>
        {% for result in results %}
            <li><a href="{{ url_for('book_details', book_id=result.id) }}"><span style="color: DarkMagenta;">{{ result.title }}</span></a> by {{ result.author.name }} - Genres:
                {% for genre in result.genres %}
                    {{ genre.name }}{% if not loop.last %}, {% endif %}
                {% endfor %}
               - Rating: {{ result.avg_rating }}
             </li>
        {% endfor %}
    </ol>
    {% else %}
    {% endif %}

    {% endblock %}